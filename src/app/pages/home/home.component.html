<nav class="navbar navbar-light bg-white text-dark shadow-sm fixed-top px-5">
  <a id="brand" class="navbar-brand big-bold green">FRESHH</a>
  <button (click)="logout()" class="btn-lg round big-btn border-green my-2 my-sm-0" type="button">Logout</button>
</nav>

<div class="container-fluid nav-margin">
  <div class="row">
    <div class="col">
      <div class="col-12 col-lg-6 m-auto card round border-green p-4">
        <form>
          <div class="form-group">
            <textarea [(ngModel)]="text" name="text" class="form-control m-bold reset-txtarea" maxlength="140"
              id="exampleFormControlTextarea1" rows="3" placeholder="What's new?"></textarea>
          </div>
        </form>

        <div id="direct_upload" ng2FileDrop [uploader]="uploader" (fileOver)="fileOverBase($event)"
          [ngClass]="{'nv-file-over': hasBaseDropZoneOver}">
          <form>
            <div class="form_line">
              <label path="title">Title:</label>
              <div class="form_controls">
                <input type="text" class="form-control" #title placeholder="Title"
                  (keyup.enter)="updateTitle(title.value)" (blur)="updateTitle(title.value)" />
              </div>
            </div>
            <div class="form_line">
              <label>Image:</label>
              <div class="form_controls">
                <div class="upload_button_holder">
                  <label class="upload_button" for="fileupload">Upload</label>
                  <!-- onChange hanlder resets the input value to get the change event when uploading the same file consecutively -->
                  <input type="file" id="fileupload" #fileInput ng2FileSelect [style.display]="'none'"
                    [uploader]="uploader" (change)="fileInput.value=''" multiple />
                </div>

              </div>
            </div>
          </form>

          <div class="file" *ngFor="let response of responses; let i = index">
            <h3>{{response.file.name}}</h3>
            <img [src]="response.data.url" alt="">
            <div class="status">
              Uploading... {{response.progress}}%
              <div *ngIf="!response.status">In progress</div>
              <div class="status-code" *ngIf="response.status">Upload completed with status code {{response.status}}
              </div>
            </div>
            <div class="progress-bar">
              <div class="progress" role="progressbar" [style.width.%]="response.progress"></div>
            </div>
            <div class="form_line">
              <div class="form_controls">
                <div class="preview">
                  <!-- Consider using https://github.com/valor-software/ng2-file-upload/issues/461 for image preview -->
                </div>
              </div>
            </div>
            <div class="info">
              <table>
                <tr *ngFor="let property of getFileProperties(response.data)">
                  <td> {{ property.key }} </td>
                  <td> {{ property.value | json}} </td>
                </tr>
              </table>
            </div>
          </div>

        </div>

        <!--
          <button type="button" class="btn-lg round bg-white big-btn my-2 my-sm-0" (click)="tweetImg()">
            <img src="../../../assets/icons8-camera-40.png" alt="camera">
          </button>
        -->

        <span class="ml-auto">
          <span class="m-bold m-4">{{text.length}} / 140</span>
          <button class="btn-lg round big-btn bg-green my-2 my-sm-0" type="button"
            (click)="createTweet(text)">Publishh</button>
        </span>
      </div>
    </div>
  </div>
  <div class="row mt-5">
    <div class="col">

      <!-- Navtabs -->
      <div class="tab-nav col col-lg-6 m-auto">
        <ul class="nav nav-fill" role="tablist">
          <li class="nav-item">
            <a class="nav-link w-100 active show m-bold" id="profile-tab-classic" data-toggle="tab" href="#alltweets"
              role="tab" aria-controls="alltweets" aria-selected="true">ALL</a>
          </li>
          <li class="nav-item">
            <a class="nav-link w-100 m-bold" data-toggle="tab" href="#mymeshh" role="tab" aria-controls="mymeshh"
              aria-selected="false">MY MESHH</a>
          </li>
          <li class="nav-item">
            <a class="nav-link w-100 m-bold" data-toggle="tab" href="#favs" role="tab" aria-controls="favs"
              aria-selected="false">FAVS</a>
          </li>
        </ul>
      </div>
      <!-- All Tweets -->
      <div class="tab-content col col-lg-6 m-auto" id="myClassicTabContent">
        <div class="tab-pane fade active show" id="alltweets" role="tabpanel" aria-labelledby="profile-tab-classic">
          <app-tweet class="m-5" [tweets]="tweets"></app-tweet>
        </div>

        <!-- My Tweets -->
        <div class="tab-pane fade" id="mymeshh" role="tabpanel" aria-labelledby="follow-tab-classic">
          <app-tweet class="m-5" [tweets]="myTweets" [user]="user"></app-tweet>
        </div>

        <!-- Favs -->
        <div class="tab-pane fade" id="favs" role="tabpanel" aria-labelledby="contact-tab-classic">
          TUITS FAVORITOS
        </div>
      </div>
    </div>
  </div>
</div>